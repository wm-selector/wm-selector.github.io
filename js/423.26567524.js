"use strict";(self["webpackChunkwm_selector"]=self["webpackChunkwm_selector"]||[]).push([[423],{8423:function(t,e,s){s.r(e),s.d(e,{default:function(){return N}});var a=function(){var t=this,e=t._self._c;return e("main",{staticClass:"json-editor-view"},[e("fieldset",{attrs:{id:"army_list"}},[e("legend",[t._v("Army List")]),e("label",[e("span",[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.json.name,expression:"json.name"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.json.name},on:{input:function(e){e.target.composing||t.$set(t.json,"name",e.target.value)}}})]),e("label",[e("span",[t._v("Version")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.json.version,expression:"json.version"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.json.version},on:{input:function(e){e.target.composing||t.$set(t.json,"version",e.target.value)}}})]),e("label",[e("span",[t._v("Group")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.json.group,expression:"json.group"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.json.group},on:{input:function(e){e.target.composing||t.$set(t.json,"group",e.target.value)}}})]),e("label",[e("span",[t._v("Order")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.json.order,expression:"json.order"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.json.order},on:{input:function(e){e.target.composing||t.$set(t.json,"order",e.target.value)}}})]),e("label",[e("span",[t._v("Magic")]),e("button",{staticClass:"fa",class:{"fa-check":t.json.magic,"fa-blank":!t.json.magic},on:{click:function(e){t.json.magic=!t.json.magic}}})])]),e("div",{staticClass:"responsive-table"},[e("table",[e("caption",[t._v("Units")]),t._m(0),e("VueDraggable",{attrs:{element:"tbody",handle:".id"},model:{value:t.unitIDs,callback:function(e){t.unitIDs=e},expression:"unitIDs"}},t._l(t.json.units,(function(s,a){return e("StatLine",{key:"unit_"+a,attrs:{id:a,troop:s}},[e("button",{staticClass:"fa fa-minus",attrs:{title:"Remove "+a},on:{click:function(e){return t.removeUnit(a)}}},[e("span",{staticClass:"sr-only"},[t._v("Remove "+t._s(a))])])])})),1),e("tfoot",[e("tr",[e("td",{staticClass:"add"},[e("button",{staticClass:"fa fa-plus",attrs:{title:"Add Unit"},on:{click:function(e){return t.addUnit()}}},[e("span",{staticClass:"sr-only"},[t._v("Add Unit")])])]),e("td",{staticClass:"id"},[e("input",{ref:"newUnit",attrs:{id:"newUnit",type:"text",placeholder:"Enter a name…"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addUnit()}}})]),e("td",{attrs:{colspan:"10"}})])])],1)]),e("div",{staticClass:"responsive-table"},[e("table",[e("caption",[t._v("Upgrades")]),t._m(1),e("VueDraggable",{attrs:{element:"tbody",handle:"tr"},model:{value:t.upgradeIDs,callback:function(e){t.upgradeIDs=e},expression:"upgradeIDs"}},t._l(t.json.upgrades,(function(s,a){return e("StatLine",{key:"upgrade_"+a,attrs:{id:a,troop:s}},[e("button",{staticClass:"fa fa-minus",attrs:{title:"Remove "+a},on:{click:function(e){return t.removeUpgrade(a)}}},[e("span",{staticClass:"sr-only"},[t._v("Remove "+t._s(a))])])])})),1),e("tfoot",[e("tr",[e("td",{staticClass:"add"},[e("button",{staticClass:"fa fa-plus",attrs:{title:"Add Upgrade"},on:{click:function(e){return t.addUpgrade()}}},[e("span",{staticClass:"sr-only"},[t._v("Add Upgrade")])])]),e("td",{staticClass:"id"},[e("input",{ref:"newUpgrade",attrs:{id:"newUpgrade",type:"text",placeholder:"Enter a name…"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addUpgrade()}}})]),e("td",{attrs:{colspan:"10"}})])])],1)]),e("fieldset",[e("legend",[t._v("Army Rules")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.armyRules,expression:"armyRules"}],staticClass:"small",attrs:{placeholder:"Please enter some markdown…"},domProps:{value:t.armyRules},on:{blur:function(t){t.target.rows=null},focus:function(t){t.target.rows=10},input:function(e){e.target.composing||(t.armyRules=e.target.value)}}})]),e("fieldset",[e("legend",[t._v("Special Rules")]),e("VueDraggable",{attrs:{handle:".handle"},model:{value:t.specialRuleIDs,callback:function(e){t.specialRuleIDs=e},expression:"specialRuleIDs"}},t._l(t.json.specialRules,(function(s,a){return e("SpecialRule",{key:"special_rule_"+a,attrs:{id:a}},[e("button",{staticClass:"fa fa-remove",attrs:{title:"Remove "+a},on:{click:function(e){return t.removeSpecialRule(a)}}},[e("span",{staticClass:"sr-only"},[t._v("Remove "+t._s(a))])])])})),1),e("div",[e("button",{staticClass:"fa fa-plus",attrs:{title:"Add Special Rule"},on:{click:function(e){return t.addSpecialRule()}}},[e("span",{staticClass:"sr-only"},[t._v("Add Special Rule")])]),e("input",{ref:"newSpecialRule",attrs:{id:"newSpecialRule",type:"text",placeholder:"Enter a name…"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addSpecialRule()}}})])],1),e("fieldset",[e("legend",[t._v("Spells")]),e("VueDraggable",{attrs:{handle:".handle"},model:{value:t.json.spells,callback:function(e){t.$set(t.json,"spells",e)},expression:"json.spells"}},t._l(t.json.spells,(function(s,a){return e("Spell",{key:"spell_"+a,attrs:{spell:s}},[e("button",{staticClass:"fa fa-remove",attrs:{title:"Remove "+s.name},on:{click:function(e){return t.removeSpell(a)}}},[e("span",{staticClass:"sr-only"},[t._v("Remove "+t._s(s.name))])])])})),1),e("div",[e("button",{staticClass:"fa fa-plus",attrs:{title:"Add Spell"},on:{click:function(e){return t.addSpell()}}},[e("span",{staticClass:"sr-only"},[t._v("Add Spell")])])])],1),e("hr"),e("textarea",{attrs:{readonly:""},domProps:{innerHTML:t._s(t.jsonString())},on:{blur:function(t){t.target.rows=null},focus:function(t){t.target.select(),t.target.rows=20}}})])},r=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"remove"}),e("th",{staticClass:"id"},[t._v("ID")]),e("th",{staticClass:"type"},[t._v("Type")]),e("th",{staticClass:"attack"},[t._v("Attack")]),e("th",{staticClass:"range"},[t._v("Range")]),e("th",{staticClass:"hits"},[t._v("Hits")]),e("th",{staticClass:"armour"},[t._v("Armour")]),e("th",{staticClass:"command"},[t._v("Command")]),e("th",{staticClass:"size"},[t._v("Size")]),e("th",{staticClass:"points"},[t._v("Points")]),e("th",{staticClass:"min-max"},[t._v("Min/Max")]),e("th",{staticClass:"special"},[t._v("Special")]),e("th",{staticClass:"upgrades"},[t._v("Upgrades")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"remove"}),e("th",{staticClass:"id"},[t._v("ID")]),e("th",{staticClass:"type"},[t._v("Type")]),e("th",{staticClass:"attack"},[t._v("Attack")]),e("th",{staticClass:"range"},[t._v("Range")]),e("th",{staticClass:"hits"},[t._v("Hits")]),e("th",{staticClass:"armour"},[t._v("Armour")]),e("th",{staticClass:"command"},[t._v("Command")]),e("th",{staticClass:"size"},[t._v("Size")]),e("th",{staticClass:"points"},[t._v("Points")]),e("th",{staticClass:"min-max"},[t._v("Min/Max")]),e("th",{staticClass:"special"},[t._v("Special")])])])}],n=s(144),o=s(9980),i=s.n(o),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"special-rule"},[e("div",{staticClass:"handle"}),e("div",{staticClass:"id"},[e("span",{staticClass:"order"},[t._v(t._s(t.order)+".")]),t._v(" "+t._s(t.id))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"small",attrs:{placeholder:"Please enter some markdown…"},domProps:{value:t.text},on:{blur:function(t){t.target.rows=null},focus:function(t){t.target.rows=10},input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._t("default")],2)},p=[],u=s(2703),c={name:"SpecialRule",computed:{order(){return u.Z.getters.json.specialRules[this.id].order},text:{get(){try{return u.Z.getters.json.specialRules[this.id].text.join("\n")}catch{return""}},set(t){n.ZP.set(u.Z.getters.json.specialRules[this.id],"text",t.split("\n"))}}},props:["id"]},d=c,m=s(1001),v=(0,m.Z)(d,l,p,!1,null,null,null),g=v.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"spell"},[e("div",{staticClass:"handle"}),e("label",[e("span",[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"small",attrs:{type:"text",placeholder:"Please enter a name…"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e("label",[e("span",[t._v("Roll")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.roll,expression:"roll"}],staticClass:"small",attrs:{type:"text",placeholder:"X+ to cast"},domProps:{value:t.roll},on:{input:function(e){e.target.composing||(t.roll=e.target.value)}}})]),e("label",[e("span",[t._v("Range")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.range,expression:"range"}],staticClass:"small",attrs:{type:"text",placeholder:"N/A"},domProps:{value:t.range},on:{input:function(e){e.target.composing||(t.range=e.target.value)}}})]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"small",attrs:{placeholder:"Please enter some markdown…"},domProps:{value:t.text},on:{blur:function(t){t.target.rows=null},focus:function(t){t.target.rows=10},input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._t("default")],2)},_=[],f={name:"Spell",computed:{name:{get(){return this.spell.name},set(t){n.ZP.set(this.spell,"name",t)}},roll:{get(){return this.spell.roll},set(t){n.ZP.set(this.spell,"roll",t)}},range:{get(){return this.spell.range},set(t){n.ZP.set(this.spell,"range",t)}},text:{get(){try{return this.spell.text.join("\n")}catch{return""}},set(t){n.ZP.set(this.spell,"text",t.split("\n"))}}},props:["spell"]},y=f,x=(0,m.Z)(y,h,_,!1,null,null,null),C=x.exports,j=function(){var t=this,e=t._self._c;return e("tr",{staticClass:"stat-line"},[e("td",{staticClass:"remove"},[t._t("default")],2),e("td",{staticClass:"id"},[t._v(t._s(t.id))]),e("td",{staticClass:"type"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"small",attrs:{type:"text"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?s:s[0]}}},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5)])]),e("td",{staticClass:"attack"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.attack,expression:"attack"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.attack},on:{input:function(e){e.target.composing||(t.attack=e.target.value)}}})]),e("td",{staticClass:"range"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.range,expression:"range"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.range},on:{input:function(e){e.target.composing||(t.range=e.target.value)}}})]),e("td",{staticClass:"hits"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.hits,expression:"hits"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.hits},on:{input:function(e){e.target.composing||(t.hits=e.target.value)}}})]),e("td",{staticClass:"armour"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.armour,expression:"armour"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.armour},on:{input:function(e){e.target.composing||(t.armour=e.target.value)}}})]),e("td",{staticClass:"command"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.command,expression:"command"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.command},on:{input:function(e){e.target.composing||(t.command=e.target.value)}}})]),e("td",{staticClass:"size"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.size,expression:"size"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.size},on:{input:function(e){e.target.composing||(t.size=e.target.value)}}})]),e("td",{staticClass:"points"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.points,expression:"points"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.points},on:{input:function(e){e.target.composing||(t.points=e.target.value)}}})]),e("td",{staticClass:"min-max"},[t.armyMinMax?e("input",{directives:[{name:"model",rawName:"v-model",value:t.armyMin,expression:"armyMin"}],attrs:{type:"text",placeholder:"0"},domProps:{value:t.armyMin},on:{input:function(e){e.target.composing||(t.armyMin=e.target.value)}}}):t._e(),t.armyMinMax?t._e():e("input",{directives:[{name:"model",rawName:"v-model",value:t.min,expression:"min"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.min},on:{input:function(e){e.target.composing||(t.min=e.target.value)}}}),e("button",{class:{army:t.armyMinMax},attrs:{title:"Toggle Min/Max Type"},on:{click:function(e){return t.toggleMinMaxType()}}},[e("span",{staticClass:"sr-only"},[t._v("Toggle Min/Max Type")])]),t.armyMinMax?e("input",{directives:[{name:"model",rawName:"v-model",value:t.armyMax,expression:"armyMax"}],attrs:{type:"text"},domProps:{value:t.armyMax},on:{input:function(e){e.target.composing||(t.armyMax=e.target.value)}}}):t._e(),t.armyMinMax?t._e():e("input",{directives:[{name:"model",rawName:"v-model",value:t.max,expression:"max"}],attrs:{type:"text",placeholder:"-"},domProps:{value:t.max},on:{input:function(e){e.target.composing||(t.max=e.target.value)}}})]),e("td",{staticClass:"special"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.specialRules,expression:"specialRules"}],attrs:{type:"text",multiple:"",size:"3"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.specialRules=e.target.multiple?s:s[0]}}},t._l(t.specialRuleIDs(),(function(s){return e("option",{key:s,attrs:{disabled:t.id===s},domProps:{value:s}},[t._v(t._s(s))])})),0)]),e("td",{staticClass:"upgrades"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.upgrades,expression:"upgrades"}],attrs:{type:"text",multiple:"",size:"3"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.upgrades=e.target.multiple?s:s[0]}}},t._l(t.upgradeIDs(),(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)])])},P=[function(){var t=this,e=t._self._c;return e("optgroup",{attrs:{label:"Units"}},[e("option",[t._v("Artillery")]),e("option",[t._v("Cavalry")]),e("option",[t._v("Chariot")]),e("option",[t._v("Elephant")]),e("option",[t._v("Infantry")]),e("option",[t._v("Machine")]),e("option",[t._v("Monster")])])},function(){var t=this,e=t._self._c;return e("optgroup",{attrs:{label:"Characters"}},[e("option",[t._v("General")]),e("option",[t._v("Hero")]),e("option",[t._v("Leader")]),e("option",[t._v("Subordinate")]),e("option",[t._v("Wizard")])])},function(){var t=this,e=t._self._c;return e("optgroup",{attrs:{label:"Upgrades"}},[e("option",[t._v("Chariot Mount")]),e("option",[t._v("Monstrous Mount")]),e("option",[t._v("Mount")]),e("option",[t._v("Special")]),e("option",[t._v("Special Mount")])])},function(){var t=this,e=t._self._c;return e("optgroup",{attrs:{label:"Unités"}},[e("option",[t._v("Artillerie")]),e("option",[t._v("Cavalerie")]),e("option",[t._v("Char")]),e("option",[t._v("Eléphant")]),e("option",[t._v("Infantrie")]),e("option",[t._v("Machine")]),e("option",[t._v("Monstre")])])},function(){var t=this,e=t._self._c;return e("optgroup",{attrs:{label:"Personnages"}},[e("option",[t._v("Général")]),e("option",[t._v("Héros")]),e("option",[t._v("Sorcier")])])},function(){var t=this,e=t._self._c;return e("optgroup",{attrs:{label:"Améliorations"}},[e("option",[t._v("Char monté")]),e("option",[t._v("Monture Monstrueuse")]),e("option",[t._v("Monture")]),e("option",[t._v("Spécial")]),e("option",[t._v("Monture Spéciale")])])}],M={name:"StatLine",computed:{type:{get(){return this.troop.type},set(t){n.ZP.set(this.troop,"type",t)}},attack:{get(){return this.troop.attack},set(t){n.ZP.set(this.troop,"attack",t)}},range:{get(){return this.troop.range},set(t){n.ZP.set(this.troop,"range",t)}},hits:{get(){return this.troop.hits},set(t){n.ZP.set(this.troop,"hits",t)}},armour:{get(){return this.troop.armour},set(t){n.ZP.set(this.troop,"armour",t)}},command:{get(){return this.troop.command},set(t){n.ZP.set(this.troop,"command",t)}},size:{get(){return this.troop.size},set(t){n.ZP.set(this.troop,"size",t)}},points:{get(){return this.troop.points},set(t){n.ZP.set(this.troop,"points",t)}},armyMin:{get(){return this.troop.armyMin},set(t){n.ZP.set(this.troop,"armyMin",t)}},min:{get(){return this.troop.min},set(t){n.ZP.set(this.troop,"min",t)}},armyMax:{get(){return this.troop.armyMax},set(t){n.ZP.set(this.troop,"armyMax",t)}},max:{get(){return this.troop.max},set(t){n.ZP.set(this.troop,"max",t)}},specialRules:{get(){return this.troop.specialRules||[]},set(t){n.ZP.set(this.troop,"specialRules",t)}},upgrades:{get(){return this.troop.upgrades||[]},set(t){n.ZP.set(this.troop,"upgrades",t)}}},data(){return{armyMinMax:void 0!==this.troop.armyMin||void 0!==this.troop.armyMax}},methods:{specialRuleIDs:()=>Object.keys(u.Z.getters.json.specialRules),toggleMinMaxType(){this.armyMinMax=!this.armyMinMax,this.armyMinMax?(n.ZP.set(this.troop,"armyMin",this.troop.min),n.ZP.set(this.troop,"armyMax",this.troop.max),n.ZP["delete"](this.troop,"min"),n.ZP["delete"](this.troop,"max")):(n.ZP.set(this.troop,"min",this.troop.armyMin),n.ZP.set(this.troop,"max",this.troop.armyMax),n.ZP["delete"](this.troop,"armyMin"),n.ZP["delete"](this.troop,"armyMax"))},upgradeIDs:()=>Object.keys(u.Z.getters.json.upgrades)},props:["id","troop"]},Z=M,k=(0,m.Z)(Z,j,P,!1,null,null,null),R=k.exports,b={name:"JSONEditorView",components:{SpecialRule:g,Spell:C,StatLine:R,VueDraggable:i()},computed:{armyRules:{get:()=>{try{return u.Z.getters.json.armyRules.join("\n")}catch{return""}},set(t){n.ZP.set(this.json,"armyRules",t.split("\n"))}},json:{get:()=>u.Z.getters.json,set:t=>u.Z.commit("SET_JSON",t)},specialRuleIDs:{get:()=>Object.keys(u.Z.getters.json.specialRules),set(t){var e=1;n.ZP.set(this.json,"specialRules",t.reduce(((t,s)=>(t[s]=u.Z.getters.json.specialRules[s],t[s].order=e++,t)),{}))}},unitIDs:{get:()=>Object.keys(u.Z.getters.json.units),set(t){var e=0;n.ZP.set(this.json,"units",t.reduce(((t,s)=>(t[s]=u.Z.getters.json.units[s],t[s].order=e++,t)),{}))}},upgradeIDs:{get:()=>Object.keys(u.Z.getters.json.upgrades),set(t){var e=0;n.ZP.set(this.json,"upgrades",t.reduce(((t,s)=>(t[s]=u.Z.getters.json.upgrades[s],t[s].order=e++,t)),{}))}}},methods:{addSpecialRule(){this.$refs.newSpecialRule.value&&(n.ZP.set(u.Z.getters.json.specialRules,this.$refs.newSpecialRule.value,{order:Object.keys(u.Z.getters.json.specialRules).length+1,text:[]}),this.$refs.newSpecialRule.value="")},addSpell(){n.ZP.set(u.Z.getters.json.spells,u.Z.getters.json.spells.length,{text:[]})},addUnit(){this.$refs.newUnit.value&&(n.ZP.set(this.json.units,this.$refs.newUnit.value,{order:Object.keys(u.Z.getters.json.units).length}),this.$refs.newUnit.value="")},addUpgrade(){this.$refs.newUpgrade.value&&(n.ZP.set(this.json.upgrades,this.$refs.newUpgrade.value,{order:Object.keys(u.Z.getters.json.upgrades).length}),this.$refs.newUpgrade.value="")},jsonString(){return JSON.stringify(this.json).replace(/":"(\d+)"/g,'":$1').replace(/ +"/g,'"').replace(/,?"[^"]+":(""|\[\]|false)/g,"").replace(/{,/g,"{")},removeSpecialRule(t){n.ZP["delete"](u.Z.getters.json.specialRules,t)},removeSpell(t){n.ZP["delete"](u.Z.getters.json.spells,t)},removeUnit(t){n.ZP["delete"](u.Z.getters.json.units,t)},removeUpgrade(t){n.ZP["delete"](u.Z.getters.json.upgrades,t)}}},w=b,S=(0,m.Z)(w,a,r,!1,null,null,null),N=S.exports}}]);
//# sourceMappingURL=423.26567524.js.map